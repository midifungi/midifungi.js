export default function () {
const subjects = ['ðŸ§˜', 'ðŸ§˜â€â™‚ï¸', 'ðŸ§˜â€â™€ï¸', 'ðŸ§˜ðŸ»', 'ðŸ§˜ðŸ»â€â™‚ï¸', 'ðŸ§˜ðŸ»â€â™€ï¸', 'ðŸ§˜ðŸ¼', 'ðŸ§˜ðŸ¼â€â™‚ï¸', 'ðŸ§˜ðŸ¼â€â™€ï¸', 'ðŸ§˜ðŸ½', 'ðŸ§˜ðŸ½â€â™‚ï¸', 'ðŸ§˜ðŸ½â€â™€ï¸', 'ðŸ§˜ðŸ¾', 'ðŸ§˜ðŸ¾â€â™‚ï¸', 'ðŸ§˜ðŸ¾â€â™€ï¸', 'ðŸ§˜ðŸ¿', 'ðŸ§˜ðŸ¿â€â™‚ï¸', 'ðŸ§˜ðŸ¿â€â™€ï¸',]
// @todo Add these to emojis
const hieroglyphs = ['ð“€€','ð“€','ð“€‚','ð“€ƒ','ð“€„','ð“€…','ð“€†','ð“€‡','ð“€ˆ','ð“€‰','ð“€Š','ð“€‹','ð“€Œ','ð“€','ð“€Ž','ð“€','ð“€','ð“€‘','ð“€’','ð“€“','ð“€”','ð“€•','ð“€–','ð“€—','ð“€˜','ð“€™','ð“€š','ð“€›','ð“€œ','ð“€','ð“€ž','ð“€Ÿ','ð“€ ','ð“€¡','ð“€¢','ð“€£','ð“€¤','ð“€¥','ð“€¦','ð“€§','ð“€¨','ð“€©','ð“€ª','ð“€«','ð“€¬','ð“€­','ð“€®','ð“€¯','ð“€°','ð“€±','ð“€²','ð“€³','ð“€´','ð“€µ','ð“€¶','ð“€·','ð“€¸','ð“€¹','ð“€º','ð“€»','ð“€¼','ð“€½','ð“€¾','ð“€¿','ð“€','ð“','ð“‚','ð“ƒ','ð“„','ð“…','ð“†','ð“‡','ð“ˆ','ð“‰','ð“Š','ð“‹','ð“Œ','ð“','ð“Ž','ð“','ð“','ð“‘','ð“’','ð““','ð“”','ð“•','ð“–','ð“—','ð“˜','ð“™','ð“š','ð“›','ð“œ','ð“','ð“ž','ð“Ÿ','ð“ ','ð“¡','ð“¢','ð“£','ð“¤','ð“¥','ð“¦','ð“§','ð“¨','ð“©','ð“ª','ð“«','ð“¬','ð“­','ð“®','ð“¯','ð“°','ð“±','ð“²','ð“³','ð“´','ð“µ','ð“¶','ð“·','ð“¸','ð“¹','ð“º','ð“»','ð“¼','ð“½','ð“¾','ð“¿','ð“‚€','ð“‚','ð“‚‚','ð“‚ƒ','ð“‚„','ð“‚…','ð“‚†','ð“‚‡','ð“‚ˆ','ð“‚‰','ð“‚Š','ð“‚‹','ð“‚Œ','ð“‚','ð“‚Ž','ð“‚','ð“‚','ð“‚‘','ð“‚’','ð“‚“','ð“‚”','ð“‚•','ð“‚–','ð“‚—','ð“‚˜','ð“‚™','ð“‚š','ð“‚›','ð“‚œ','ð“‚','ð“‚ž','ð“‚Ÿ','ð“‚ ','ð“‚¡','ð“‚¢','ð“‚£','ð“‚¤','ð“‚¥','ð“‚¦','ð“‚§','ð“‚¨','ð“‚©','ð“‚ª','ð“‚«','ð“‚¬','ð“‚­','ð“‚®','ð“‚¯','ð“‚°','ð“‚±','ð“‚²','ð“‚³','ð“‚´','ð“‚µ','ð“‚¶','ð“‚·','ð“‚¸','ð“‚¹','ð“‚º','ð“‚»','ð“‚¼','ð“‚½','ð“‚¾','ð“‚¿','ð“ƒ€','ð“ƒ','ð“ƒ‚','ð“ƒƒ','ð“ƒ„','ð“ƒ…','ð“ƒ†','ð“ƒ‡','ð“ƒˆ','ð“ƒ‰','ð“ƒŠ','ð“ƒ‹','ð“ƒŒ','ð“ƒ','ð“ƒŽ','ð“ƒ','ð“ƒ','ð“ƒ‘','ð“ƒ’','ð“ƒ“','ð“ƒ”','ð“ƒ•','ð“ƒ–','ð“ƒ—','ð“ƒ˜','ð“ƒ™','ð“ƒš','ð“ƒ›','ð“ƒœ','ð“ƒ','ð“ƒž','ð“ƒŸ','ð“ƒ ','ð“ƒ¡','ð“ƒ¢','ð“ƒ£','ð“ƒ¤','ð“ƒ¥','ð“ƒ¦','ð“ƒ§','ð“ƒ¨','ð“ƒ©','ð“ƒª','ð“ƒ«','ð“ƒ¬','ð“ƒ­','ð“ƒ®','ð“ƒ¯','ð“ƒ°','ð“ƒ±','ð“ƒ²','ð“ƒ³','ð“ƒ´','ð“ƒµ','ð“ƒ¶','ð“ƒ·','ð“ƒ¸','ð“ƒ¹','ð“ƒº','ð“ƒ»','ð“ƒ¼','ð“ƒ½','ð“ƒ¾','ð“ƒ¿','ð“„€','ð“„','ð“„‚','ð“„ƒ','ð“„„','ð“„…','ð“„†','ð“„‡','ð“„ˆ','ð“„‰','ð“„Š','ð“„‹','ð“„Œ','ð“„','ð“„Ž','ð“„','ð“„','ð“„‘','ð“„’','ð“„“','ð“„”','ð“„•','ð“„–','ð“„—','ð“„˜','ð“„™','ð“„š','ð“„›','ð“„œ','ð“„','ð“„ž','ð“„Ÿ','ð“„ ','ð“„¡','ð“„¢','ð“„£','ð“„¤','ð“„¥','ð“„¦','ð“„§','ð“„¨','ð“„©','ð“„ª','ð“„«','ð“„¬','ð“„­','ð“„®','ð“„¯','ð“„°','ð“„±','ð“„²','ð“„³','ð“„´','ð“„µ','ð“„¶','ð“„·','ð“„¸','ð“„¹','ð“„º','ð“„»','ð“„¼','ð“„½','ð“„¾','ð“„¿','ð“…€','ð“…','ð“…‚','ð“…ƒ','ð“…„','ð“……','ð“…†','ð“…‡','ð“…ˆ','ð“…‰','ð“…Š','ð“…‹','ð“…Œ','ð“…','ð“…Ž','ð“…','ð“…','ð“…‘','ð“…’','ð“…“','ð“…”','ð“…•','ð“…–','ð“…—','ð“…˜','ð“…™','ð“…š','ð“…›','ð“…œ','ð“…','ð“…ž','ð“…Ÿ','ð“… ','ð“…¡','ð“…¢','ð“…£','ð“…¤','ð“…¥','ð“…¦','ð“…§','ð“…¨','ð“…©','ð“…ª','ð“…«','ð“…¬','ð“…­','ð“…®','ð“…¯','ð“…°','ð“…±','ð“…²','ð“…³','ð“…´','ð“…µ','ð“…¶','ð“…·','ð“…¸','ð“…¹','ð“…º','ð“…»','ð“…¼','ð“…½','ð“…¾','ð“…¿','ð“†€','ð“†','ð“†‚','ð“†ƒ','ð“†„','ð“†…','ð“††','ð“†‡','ð“†ˆ','ð“†‰','ð“†Š','ð“†‹','ð“†Œ','ð“†','ð“†Ž','ð“†','ð“†','ð“†‘','ð“†’','ð“†“','ð“†”','ð“†•','ð“†–','ð“†—','ð“†˜','ð“†™','ð“†š','ð“†›','ð“†œ','ð“†','ð“†ž','ð“†Ÿ','ð“† ','ð“†¡','ð“†¢','ð“†£','ð“†¤','ð“†¥','ð“†¦','ð“†§','ð“†¨','ð“†©','ð“†ª','ð“†«','ð“†¬','ð“†­','ð“†®','ð“†¯','ð“†°','ð“†±','ð“†²','ð“†³','ð“†´','ð“†µ','ð“†¶','ð“†·','ð“†¸','ð“†¹','ð“†º','ð“†»','ð“†¼','ð“†½','ð“†¾','ð“†¿','ð“‡€','ð“‡','ð“‡‚','ð“‡ƒ','ð“‡„','ð“‡…','ð“‡†','ð“‡‡','ð“‡ˆ','ð“‡‰','ð“‡Š','ð“‡‹','ð“‡Œ','ð“‡','ð“‡Ž','ð“‡','ð“‡','ð“‡‘','ð“‡’','ð“‡“','ð“‡”','ð“‡•','ð“‡–','ð“‡—','ð“‡˜','ð“‡™','ð“‡š','ð“‡›','ð“‡œ','ð“‡','ð“‡ž','ð“‡Ÿ','ð“‡ ','ð“‡¡','ð“‡¢','ð“‡£','ð“‡¤','ð“‡¥','ð“‡¦','ð“‡§','ð“‡¨','ð“‡©','ð“‡ª','ð“‡«','ð“‡¬','ð“‡­','ð“‡®','ð“‡¯','ð“‡°','ð“‡±','ð“‡²','ð“‡³','ð“‡´','ð“‡µ','ð“‡¶','ð“‡·','ð“‡¸','ð“‡¹','ð“‡º','ð“‡»','ð“‡¼','ð“‡½','ð“‡¾','ð“‡¿','ð“ˆ€','ð“ˆ','ð“ˆ‚','ð“ˆƒ','ð“ˆ„','ð“ˆ…','ð“ˆ†','ð“ˆ‡','ð“ˆˆ','ð“ˆ‰','ð“ˆŠ','ð“ˆ‹','ð“ˆŒ','ð“ˆ','ð“ˆŽ','ð“ˆ','ð“ˆ','ð“ˆ‘','ð“ˆ’','ð“ˆ“','ð“ˆ”','ð“ˆ•','ð“ˆ–','ð“ˆ—','ð“ˆ˜','ð“ˆ™','ð“ˆš','ð“ˆ›','ð“ˆœ','ð“ˆ','ð“ˆž','ð“ˆŸ','ð“ˆ ','ð“ˆ¡','ð“ˆ¢','ð“ˆ£','ð“ˆ¤','ð“ˆ¥','ð“ˆ¦','ð“ˆ§','ð“ˆ¨','ð“ˆ©','ð“ˆª','ð“ˆ«','ð“ˆ¬','ð“ˆ­','ð“ˆ®','ð“ˆ¯','ð“ˆ°','ð“ˆ±','ð“ˆ²','ð“ˆ³','ð“ˆ´','ð“ˆµ','ð“ˆ¶','ð“ˆ·','ð“ˆ¸','ð“ˆ¹','ð“ˆº','ð“ˆ»','ð“ˆ¼','ð“ˆ½','ð“ˆ¾','ð“ˆ¿','ð“‰€','ð“‰','ð“‰‚','ð“‰ƒ','ð“‰„','ð“‰…','ð“‰†','ð“‰‡','ð“‰ˆ','ð“‰‰','ð“‰Š','ð“‰‹','ð“‰Œ','ð“‰','ð“‰Ž','ð“‰','ð“‰','ð“‰‘','ð“‰’','ð“‰“','ð“‰”','ð“‰•','ð“‰–','ð“‰—','ð“‰˜','ð“‰™','ð“‰š','ð“‰›','ð“‰œ','ð“‰','ð“‰ž','ð“‰Ÿ','ð“‰ ','ð“‰¡','ð“‰¢','ð“‰£','ð“‰¤','ð“‰¥','ð“‰¦','ð“‰§','ð“‰¨','ð“‰©','ð“‰ª','ð“‰«','ð“‰¬','ð“‰­','ð“‰®','ð“‰¯','ð“‰°','ð“‰±','ð“‰²','ð“‰³','ð“‰´','ð“‰µ','ð“‰¶','ð“‰·','ð“‰¸','ð“‰¹','ð“‰º','ð“‰»','ð“‰¼','ð“‰½','ð“‰¾','ð“‰¿','ð“Š€','ð“Š','ð“Š‚','ð“Šƒ','ð“Š„','ð“Š…','ð“Š†','ð“Š‡','ð“Šˆ','ð“Š‰','ð“ŠŠ','ð“Š‹','ð“ŠŒ','ð“Š','ð“ŠŽ','ð“Š','ð“Š','ð“Š‘','ð“Š’','ð“Š“','ð“Š”','ð“Š•','ð“Š–','ð“Š—','ð“Š˜','ð“Š™','ð“Šš','ð“Š›','ð“Šœ','ð“Š','ð“Šž','ð“ŠŸ','ð“Š ','ð“Š¡','ð“Š¢','ð“Š£','ð“Š¤','ð“Š¥','ð“Š¦','ð“Š§','ð“Š¨','ð“Š©','ð“Šª','ð“Š«','ð“Š¬','ð“Š­','ð“Š®','ð“Š¯','ð“Š°','ð“Š±','ð“Š²','ð“Š³','ð“Š´','ð“Šµ','ð“Š¶','ð“Š·','ð“Š¸','ð“Š¹','ð“Šº','ð“Š»','ð“Š¼','ð“Š½','ð“Š¾','ð“Š¿','ð“‹€','ð“‹','ð“‹‚','ð“‹ƒ','ð“‹„','ð“‹…','ð“‹†','ð“‹‡','ð“‹ˆ','ð“‹‰','ð“‹Š','ð“‹‹','ð“‹Œ','ð“‹','ð“‹Ž','ð“‹','ð“‹','ð“‹‘','ð“‹’','ð“‹“','ð“‹”','ð“‹•','ð“‹–','ð“‹—','ð“‹˜','ð“‹™','ð“‹š','ð“‹›','ð“‹œ','ð“‹','ð“‹ž','ð“‹Ÿ','ð“‹ ','ð“‹¡','ð“‹¢','ð“‹£','ð“‹¤','ð“‹¥','ð“‹¦','ð“‹§','ð“‹¨','ð“‹©','ð“‹ª','ð“‹«','ð“‹¬','ð“‹­','ð“‹®','ð“‹¯','ð“‹°','ð“‹±','ð“‹²','ð“‹³','ð“‹´','ð“‹µ','ð“‹¶','ð“‹·','ð“‹¸','ð“‹¹','ð“‹º','ð“‹»','ð“‹¼','ð“‹½','ð“‹¾','ð“‹¿','ð“Œ€','ð“Œ','ð“Œ‚','ð“Œƒ','ð“Œ„','ð“Œ…','ð“Œ†','ð“Œ‡','ð“Œˆ','ð“Œ‰','ð“ŒŠ','ð“Œ‹','ð“ŒŒ','ð“Œ','ð“ŒŽ','ð“Œ','ð“Œ','ð“Œ‘','ð“Œ’','ð“Œ“','ð“Œ”','ð“Œ•','ð“Œ–','ð“Œ—','ð“Œ˜','ð“Œ™','ð“Œš','ð“Œ›','ð“Œœ','ð“Œ','ð“Œž','ð“ŒŸ','ð“Œ ','ð“Œ¡','ð“Œ¢','ð“Œ£','ð“Œ¤','ð“Œ¥','ð“Œ¦','ð“Œ§','ð“Œ¨','ð“Œ©','ð“Œª','ð“Œ«','ð“Œ¬','ð“Œ­','ð“Œ®','ð“Œ¯','ð“Œ°','ð“Œ±','ð“Œ²','ð“Œ³','ð“Œ´','ð“Œµ','ð“Œ¶','ð“Œ·','ð“Œ¸','ð“Œ¹','ð“Œº','ð“Œ»','ð“Œ¼','ð“Œ½','ð“Œ¾','ð“Œ¿','ð“€','ð“','ð“‚','ð“ƒ','ð“„','ð“…','ð“†','ð“‡','ð“ˆ','ð“‰','ð“Š','ð“‹','ð“Œ','ð“','ð“Ž','ð“','ð“','ð“‘','ð“’','ð““','ð“”','ð“•','ð“–','ð“—','ð“˜','ð“™','ð“š','ð“›','ð“œ','ð“','ð“ž','ð“Ÿ','ð“ ','ð“¡','ð“¢','ð“£','ð“¤','ð“¥','ð“¦','ð“§','ð“¨','ð“©','ð“ª','ð“«','ð“¬','ð“­','ð“®','ð“¯','ð“°','ð“±','ð“²','ð“³','ð“´','ð“µ','ð“¶','ð“·','ð“¸','ð“¹','ð“º','ð“»','ð“¼','ð“½','ð“¾','ð“¿','ð“Ž€','ð“Ž','ð“Ž‚','ð“Žƒ','ð“Ž„','ð“Ž…','ð“Ž†','ð“Ž‡','ð“Žˆ','ð“Ž‰','ð“ŽŠ','ð“Ž‹','ð“ŽŒ','ð“Ž','ð“ŽŽ','ð“Ž','ð“Ž','ð“Ž‘','ð“Ž’','ð“Ž“','ð“Ž”','ð“Ž•','ð“Ž–','ð“Ž—','ð“Ž˜','ð“Ž™','ð“Žš','ð“Ž›','ð“Žœ','ð“Ž','ð“Žž','ð“ŽŸ','ð“Ž ','ð“Ž¡','ð“Ž¢','ð“Ž£','ð“Ž¤','ð“Ž¥','ð“Ž¦','ð“Ž§','ð“Ž¨','ð“Ž©','ð“Žª','ð“Ž«','ð“Ž¬','ð“Ž­','ð“Ž®','ð“Ž¯','ð“Ž°','ð“Ž±','ð“Ž²','ð“Ž³','ð“Ž´','ð“Žµ','ð“Ž¶','ð“Ž·','ð“Ž¸','ð“Ž¹','ð“Žº','ð“Ž»','ð“Ž¼','ð“Ž½','ð“Ž¾','ð“Ž¿','ð“€','ð“','ð“‚','ð“ƒ','ð“„','ð“…','ð“†','ð“‡','ð“ˆ','ð“‰','ð“Š','ð“‹','ð“Œ','ð“','ð“Ž','ð“','ð“','ð“‘','ð“’','ð““','ð“”','ð“•','ð“–','ð“—','ð“˜','ð“™','ð“š','ð“›','ð“œ','ð“','ð“ž','ð“Ÿ','ð“ ','ð“¡','ð“¢','ð“£','ð“¤','ð“¥','ð“¦','ð“§','ð“¨','ð“©','ð“ª','ð“«','ð“¬','ð“­','ð“®','ð“¯','ð“°','ð“±','ð“²','ð“³','ð“´','ð“µ','ð“¶','ð“·','ð“¸','ð“¹','ð“º','ð“»','ð“¼','ð“½','ð“¾','ð“¿','ð“€','ð“','ð“‚','ð“ƒ','ð“„','ð“…','ð“†','ð“‡','ð“ˆ','ð“‰','ð“Š','ð“‹','ð“Œ','ð“','ð“Ž','ð“','ð“','ð“‘','ð“’','ð““','ð“”','ð“•','ð“–','ð“—','ð“˜','ð“™','ð“š','ð“›','ð“œ','ð“','ð“ž','ð“Ÿ','ð“ ','ð“¡','ð“¢','ð“£','ð“¤','ð“¥','ð“¦','ð“§','ð“¨','ð“©','ð“ª','ð“«','ð“¬','ð“­','ð“®','',]

Layers.create(() => {

  // Size of emoji
  const size = minSize * .65

  new Layer({
    id: 'main',
    noLoop: true,
    colors: [
      // Limestone base
      '#eee2c7',
      // Dark Green
      '#003333'
    ],

    menu: {
      eyeHeight: {max: 1},
      mouthHeight: {max: 1},
    },

    store: {
      subjects: [],
    },

    setup () {
      textAlign(CENTER, CENTER)

      // Create main subjects
      $subjects = []
      for (let i = 0; i < ~~random(1, 4); i++) {
        $subjects.push({
          emoji: random(subjects),
          eyeHeight: random(1),
          mouthHeight: random(1),
          eyes: random() > .5 ? 'ðŸ‘ï¸' : 'ðŸ‘ï¸ðŸ‘ï¸',
        })
      }
    },
    
    draw () {
      let size = minSize * .4
      clear()
      
      push()
      translate(size*.5, height/1.8)
      textStyle(NORMAL)

      // Draw Subjects
      $subjects.forEach(subject => {
        drawingContext.shadowBlur = 0
        textSize(size)
        text(subject.emoji, 0, 0)
        let newSize = size

        // body
        drawingContext.shadowBlur = 5
        drawingContext.shadowColor = '#000'
        for (let i = 0; i < 20; i++) {
          newSize -= newSize * .1
          textSize(newSize)
          text(subject.emoji, 0, 0)
        }

        // face
        textSize(size*.2)
        text(subject.eyes, 0, -subject.eyeHeight*size*.4)
        text('ðŸ‘„', 0, -subject.eyeHeight*size*.2 + subject.mouthHeight*size*.4)

        translate(size * .9, 0)
      })

      // Draw hieroglyphs
      drawingContext.shadowBlur = 0
      let remainingSpace = width - size*$subjects.length
      translate(0, -height/3)
      textStyle(BOLD)
      strokeWeight(minSize*.005)
      
      if (remainingSpace > size*.5) {
        // Column
        for (let x = 0; x < remainingSpace/size-.3; x+=.5) {
          fill(this.colors[1])
          stroke(this.colors[1])
          rect(size*x-size*.25, -size*.2, size*.01, height*.7)
          
          // Row
          for (let y = 0; y < height/size+.5; y+=.5) {
            let glyph = random(hieroglyphs)
            textSize(size*.3)

            // light
            fill('#fff')
            stroke('#fff')
            text(glyph, x*size - size*.01, y*(size*.5) - size*.01)
            
            // Shadow
            fill('#000')
            stroke('#000')
            text(glyph, x*size + size*.01, y*(size*.5) + size*.01)            
            
            // Carving
            fill(this.colors[1])
            stroke(this.colors[1])
            text(glyph, x*size, y*(size*.5))
          }
        }
      }

      pop()

      // Apply noise
      let noiseAmount = 200
      let x = 0
      let y = 0

      // First pass (perlin noise)
      loadPixels()

      for (let i = 0; i < pixels.length; i+=4) {
        if (pixels[i+3] > 0) {
          pixels[i] += noiseAmount - noise(x*.1, y*.1) * noiseAmount*2
          pixels[i+1] += noiseAmount - noise(x*.1, y*.1) * noiseAmount*2
          pixels[i+2] += noiseAmount - noise(x*.1, y*.1) * noiseAmount*2
          x++
          if (x > width) {
            x = 0
            y++
          }
        }
      }
    
      // Second pass (roughgen)
      noiseAmount = 50
      for (let i = 0; i < pixels.length; i+=4) {
        if (pixels[i+3] > 0) {
          pixels[i] += noiseAmount - noise(i*.1) * noiseAmount*2
          pixels[i+1] += noiseAmount - noise(i*.1) * noiseAmount*2
          pixels[i+2] += noiseAmount - noise(i*.1) * noiseAmount*2
          x++
          if (x > width) {
            x = 0
            y++
          }
        }
      }
    
      // Third pass (random)
      noiseAmount = 25
      for (let i = 0; i < pixels.length; i+=4) {
        if (pixels[i+3] > 0) {
          pixels[i] += random(-noiseAmount, noiseAmount)
          pixels[i+1] += random(-noiseAmount, noiseAmount)
          pixels[i+2] += random(-noiseAmount, noiseAmount)
          x++
          if (x > width) {
            x = 0
            y++
          }
        }
      }

      updatePixels()
    }
  })
})
}

