export default function () {
const emojis = {
  kids: ['ğŸ‘§ğŸ»', 'ğŸ‘¦ğŸ»', 'ğŸ§’ğŸ»', 'ğŸ‘¶ğŸ»', 'ğŸ‘§ğŸ¼', 'ğŸ‘¦ğŸ¼', 'ğŸ§’ğŸ¼', 'ğŸ‘¶ğŸ¼', 'ğŸ‘§ğŸ½', 'ğŸ‘¦ğŸ½', 'ğŸ§’ğŸ½', 'ğŸ‘¶ğŸ½', 'ğŸ‘§ğŸ¾', 'ğŸ‘¦ğŸ¾', 'ğŸ§’ğŸ¾', 'ğŸ‘¶ğŸ¾', 'ğŸ‘§ğŸ¿', 'ğŸ‘¦ğŸ¿', 'ğŸ§’ğŸ¿', 'ğŸ‘¶ğŸ¿'],
  parents: ['ğŸ‘©ğŸ»', 'ğŸ‘¨ğŸ»', 'ğŸ§‘ğŸ»', 'ğŸ‘©ğŸ»â€ğŸ¦°', 'ğŸ‘¨ğŸ»â€ğŸ¦°', 'ğŸ§‘ğŸ»â€ğŸ¦°', 'ğŸ‘©ğŸ»â€ğŸ¦±', 'ğŸ‘¨ğŸ»â€ğŸ¦±', 'ğŸ§‘ğŸ»â€ğŸ¦±', 'ğŸ‘©ğŸ»â€ğŸ¦²', 'ğŸ‘¨ğŸ»â€ğŸ¦²', 'ğŸ§‘ğŸ»â€ğŸ¦²', 'ğŸ‘±ğŸ»â€â™€ï¸', 'ğŸ‘±ğŸ»â€â™‚ï¸', 'ğŸ‘±ğŸ»', 'ğŸ‘³ğŸ»â€â™€ï¸', 'ğŸ‘³ğŸ»â€â™‚ï¸', 'ğŸ‘³ğŸ»', 'ğŸ§”ğŸ»', 'ğŸ§”ğŸ»â€â™‚ï¸', 'ğŸ§”ğŸ»â€â™€ï¸', 'ğŸ‘©ğŸ¼', 'ğŸ‘¨ğŸ¼', 'ğŸ§‘ğŸ¼', 'ğŸ‘©ğŸ¼â€ğŸ¦°', 'ğŸ‘¨ğŸ¼â€ğŸ¦°', 'ğŸ§‘ğŸ¼â€ğŸ¦°', 'ğŸ‘©ğŸ¼â€ğŸ¦±', 'ğŸ‘¨ğŸ¼â€ğŸ¦±', 'ğŸ§‘ğŸ¼â€ğŸ¦±', 'ğŸ‘©ğŸ¼â€ğŸ¦²', 'ğŸ‘¨ğŸ¼â€ğŸ¦²', 'ğŸ§‘ğŸ¼â€ğŸ¦²', 'ğŸ‘±ğŸ¼â€â™€ï¸', 'ğŸ‘±ğŸ¼â€â™‚ï¸', 'ğŸ‘±ğŸ¼', 'ğŸ‘³ğŸ¼â€â™€ï¸', 'ğŸ‘³ğŸ¼â€â™‚ï¸', 'ğŸ‘³ğŸ¼', 'ğŸ§”ğŸ¼', 'ğŸ§”ğŸ¼â€â™‚ï¸', 'ğŸ§”ğŸ¼â€â™€ï¸', 'ğŸ‘©ğŸ½', 'ğŸ‘¨ğŸ½', 'ğŸ§‘ğŸ½', 'ğŸ‘©ğŸ½â€ğŸ¦°', 'ğŸ‘¨ğŸ½â€ğŸ¦°', 'ğŸ§‘ğŸ½â€ğŸ¦°', 'ğŸ‘©ğŸ½â€ğŸ¦±', 'ğŸ‘¨ğŸ½â€ğŸ¦±', 'ğŸ§‘ğŸ½â€ğŸ¦±', 'ğŸ‘©ğŸ½â€ğŸ¦²', 'ğŸ‘¨ğŸ½â€ğŸ¦²', 'ğŸ§‘ğŸ½â€ğŸ¦²', 'ğŸ‘±ğŸ½â€â™€ï¸', 'ğŸ‘±ğŸ½â€â™‚ï¸', 'ğŸ‘±ğŸ½', 'ğŸ‘³ğŸ½â€â™€ï¸', 'ğŸ‘³ğŸ½â€â™‚ï¸', 'ğŸ‘³ğŸ½', 'ğŸ§”ğŸ½', 'ğŸ§”ğŸ½â€â™‚ï¸', 'ğŸ§”ğŸ½â€â™€ï¸', 'ğŸ‘©ğŸ¾', 'ğŸ‘¨ğŸ¾', 'ğŸ§‘ğŸ¾', 'ğŸ‘©ğŸ¾â€ğŸ¦°', 'ğŸ‘¨ğŸ¾â€ğŸ¦°', 'ğŸ§‘ğŸ¾â€ğŸ¦°', 'ğŸ‘©ğŸ¾â€ğŸ¦±', 'ğŸ‘¨ğŸ¾â€ğŸ¦±', 'ğŸ§‘ğŸ¾â€ğŸ¦±', 'ğŸ‘©ğŸ¾â€ğŸ¦²', 'ğŸ‘¨ğŸ¾â€ğŸ¦²', 'ğŸ§‘ğŸ¾â€ğŸ¦²', 'ğŸ‘±ğŸ¾â€â™€ï¸', 'ğŸ‘±ğŸ¾â€â™‚ï¸', 'ğŸ‘±ğŸ¾', 'ğŸ‘³ğŸ¾â€â™€ï¸', 'ğŸ‘³ğŸ¾â€â™‚ï¸', 'ğŸ‘³ğŸ¾', 'ğŸ§”ğŸ¾', 'ğŸ§”ğŸ¾â€â™‚ï¸', 'ğŸ§”ğŸ¾â€â™€ï¸', 'ğŸ‘©ğŸ¿', 'ğŸ‘¨ğŸ¿', 'ğŸ§‘ğŸ¿', 'ğŸ‘©ğŸ¿â€ğŸ¦°', 'ğŸ‘¨ğŸ¿â€ğŸ¦°', 'ğŸ§‘ğŸ¿â€ğŸ¦°', 'ğŸ‘©ğŸ¿â€ğŸ¦±', 'ğŸ‘¨ğŸ¿â€ğŸ¦±', 'ğŸ§‘ğŸ¿â€ğŸ¦±', 'ğŸ‘©ğŸ¿â€ğŸ¦²', 'ğŸ‘¨ğŸ¿â€ğŸ¦²', 'ğŸ§‘ğŸ¿â€ğŸ¦²', 'ğŸ‘±ğŸ¿â€â™€ï¸', 'ğŸ‘±ğŸ¿â€â™‚ï¸', 'ğŸ‘±ğŸ¿', 'ğŸ‘³ğŸ¿â€â™€ï¸', 'ğŸ‘³ğŸ¿â€â™‚ï¸', 'ğŸ‘³ğŸ¿', 'ğŸ§”ğŸ¿', 'ğŸ§”ğŸ¿â€â™‚ï¸', 'ğŸ§”ğŸ¿â€â™€ï¸',],
  grandparents: ['ğŸ‘µğŸ»', 'ğŸ‘´ğŸ»', 'ğŸ§“ğŸ»', 'ğŸ‘©ğŸ»â€ğŸ¦³', 'ğŸ‘¨ğŸ»â€ğŸ¦³', 'ğŸ§‘ğŸ»â€ğŸ¦³', 'ğŸ‘©ğŸ»â€ğŸ¦²', 'ğŸ‘¨ğŸ»â€ğŸ¦²', 'ğŸ§‘ğŸ»â€ğŸ¦²', 'ğŸ‘µğŸ¼', 'ğŸ‘´ğŸ¼', 'ğŸ§“ğŸ¼', 'ğŸ‘©ğŸ¼â€ğŸ¦³', 'ğŸ‘¨ğŸ¼â€ğŸ¦³', 'ğŸ§‘ğŸ¼â€ğŸ¦³', 'ğŸ‘©ğŸ¼â€ğŸ¦²', 'ğŸ‘¨ğŸ¼â€ğŸ¦²', 'ğŸ§‘ğŸ¼â€ğŸ¦²', 'ğŸ‘µğŸ½', 'ğŸ‘´ğŸ½', 'ğŸ§“ğŸ½', 'ğŸ‘©ğŸ½â€ğŸ¦³', 'ğŸ‘¨ğŸ½â€ğŸ¦³', 'ğŸ§‘ğŸ½â€ğŸ¦³', 'ğŸ‘©ğŸ½â€ğŸ¦²', 'ğŸ‘¨ğŸ½â€ğŸ¦²', 'ğŸ§‘ğŸ½â€ğŸ¦²', 'ğŸ‘µğŸ¾', 'ğŸ‘´ğŸ¾', 'ğŸ§“ğŸ¾', 'ğŸ‘©ğŸ¾â€ğŸ¦³', 'ğŸ‘¨ğŸ¾â€ğŸ¦³', 'ğŸ§‘ğŸ¾â€ğŸ¦³', 'ğŸ‘©ğŸ¾â€ğŸ¦²', 'ğŸ‘¨ğŸ¾â€ğŸ¦²', 'ğŸ§‘ğŸ¾â€ğŸ¦²', 'ğŸ‘µğŸ¿', 'ğŸ‘´ğŸ¿', 'ğŸ§“ğŸ¿', 'ğŸ‘©ğŸ¿â€ğŸ¦³', 'ğŸ‘¨ğŸ¿â€ğŸ¦³', 'ğŸ§‘ğŸ¿â€ğŸ¦³', 'ğŸ‘©ğŸ¿â€ğŸ¦²', 'ğŸ‘¨ğŸ¿â€ğŸ¦²', 'ğŸ§‘ğŸ¿â€ğŸ¦²'],
  apes: ['ğŸ™ˆ', 'ğŸ™‰', 'ğŸ™Š', 'ğŸµ', 'ğŸ’', 'ğŸ¦', 'ğŸ¦§'],
  mammals: ['ğŸ­', 'ğŸ', 'ğŸ€', 'ğŸ¹', 'ğŸ°', 'ğŸ‡', 'ğŸ¿ï¸', 'ğŸ¦«', 'ğŸ¿ï¸', 'ğŸ¦¦', 'ğŸ¦¨', 'ğŸ¦¡'],
  lizards: ['ğŸ¸', 'ğŸŠ', 'ğŸ¢', 'ğŸ¦', 'ğŸ', 'ğŸ²', 'ğŸ‰', 'ğŸ¦•', 'ğŸ¦–'],
  fish: ['ğŸ³', 'ğŸ‹', 'ğŸ¬', 'ğŸŸ', 'ğŸ ', 'ğŸ¡', 'ğŸ™', 'ğŸ¦‘', 'ğŸ¦ˆ'],
  microbes: ['ğŸ›', 'ğŸª±', 'ğŸ¦ ', 'ğŸŒ', 'ğŸš', 'ğŸ¦'],
  earth: ['ğŸŒ', 'ğŸŒ', 'ğŸŒ', 'ğŸª¨', 'â˜ï¸', 'â›…', 'â›ˆï¸', 'ğŸŒ¤ï¸', 'ğŸŒ¥ï¸', 'ğŸŒ¦ï¸', 'ğŸŒ§ï¸', 'ğŸŒ¨ï¸', 'ğŸŒ©ï¸', 'ğŸŒªï¸', 'â˜„ï¸', 'âš¡', 'ğŸŒ‹', 'â„ï¸', 'ğŸ”ï¸', 'â›°ï¸', 'ğŸ—»'],
  solarsystem: ['â˜€ï¸', 'ğŸŒ', 'ğŸŒ‘', 'ğŸŒ’', 'ğŸŒ“', 'ğŸŒ”', 'ğŸŒ•', 'ğŸŒ–', 'ğŸŒ—', 'ğŸŒ˜', 'ğŸŒ™', 'ğŸŒš', 'ğŸŒ›', 'ğŸŒœ', 'ğŸŒ', 'ğŸª'],
  space1: ['â­', 'ğŸŒŸ', 'âœ¨', 'ğŸ’«', 'ğŸ›¸'],
  space2: ['â­', 'ğŸŒŸ', 'âœ¨'],
  space3: ['â­', 'ğŸŒŸ'],
  space4: ['â­'],
}

/**
 * Defines a ring of emojis
 */
class Ring {
  // opts.radius
  // opts.count
  // opts.emojiSet
  constructor (opts) {
    Object.assign(this, opts)
    this.emojis = []

    for (let i = 0; i < this.count; i++) {
      this.emojis.push(random(this.emojiSet))
    }
  }

  draw () {
    const circum = 2*PI*this.radius
    const angle = TWO_PI/this.count
    textSize(circum/this.count)
    
    for (let i = 0; i < this.count; i++) {
      const emoji = this.emojis[i]
      const x = this.radius * Math.cos(i * angle)
      const y = this.radius * Math.sin(i * angle)
      text(emoji, width/2+x, height/2+y)
    }
  }
}

Layers.create(() => {
  const layer = new Layer({
    id: 'main',
    noLoop: true,

    menu: {
      bg () {return this.colors},
    },
    store: {
      center: '',
      centerSize: 0,
      rings: []
    },

    setup () {
      textAlign(CENTER, CENTER)

      $center = random(emojis.kids)
      $centerSize = random(.2, .4) * minSize
      $bg = this.colors[6]

      $rings = []

      let extraCount = 0
      let scale = .7
      Object.keys(emojis).forEach(key => {
        if (key === 'kids') return
        
        $rings.unshift(new Ring({
          radius: $centerSize * scale,
          count: ~~random(10+extraCount, 50+extraCount),
          emojiSet: emojis[key]
        }))

        extraCount += 10
        scale += .25
      })
    },

    draw () {
      background($bg)

      // Draw kid
      textSize($centerSize)
      text($center, width/2, height/2)

      // Draw rings
      $rings.forEach(ring => ring.draw())
    }
  })


  // Uncomment to regenerate every few frames for recording purposes
  // @todo Make this a feature
  // function restart () {
  //   setTimeout(() => {
  //     if (layer) {
  //       layer.generate(true)
  //       layer.draw()
  //       restart()
  //     }
  //   }, 2500)
  // }
  // restart()
})
}